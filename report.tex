\documentclass[article,11pt,onecolumn,final]{IEEEtran}
\usepackage{epsfig,latexsym,amsfonts,amsmath,amssymb,verbatim,cite,mathrsfs}
\usepackage{graphicx}
\usepackage[dvips]{color}

\newtheorem{theorem}{Theorem}

\title{Passive Bistatic Radar using WiFi for Indoor Localization}

\author{\IEEEauthorblockN{Alexander and Ernest (TODO last names)}  \\
\IEEEauthorblockA{Department of Electrical and Computer Engineering\\ 
Boston University
}}

\begin{document}

\maketitle
\begin{abstract}
As wireless networks have become commonplace in homes and offices, the opportunity arises to use
these signals for localization of a person or other target. Applications could range from improving indoor
location in the absence of GPS signals to locating an intruder inside a building. This project will explore
applying bistatic radar techniques to indoor localization of a target in an environment with IEEE 802.11
transmissions. This study will survey several papers that propose techniques for passive bistatic radar
using WiFi. Under simulations of indoor fading with walls and ceilings, these techniques will be
implemented and compared for detecting stationary and moving targets. The project will aim to
determine which techniques work well under which conditions.
\end{abstract}

\section{Introduction and motivation} 
Passive radar is a field that has relatively recently gained interest and traction due to the abundance of
RF emissions for communication purposes, covert and inexpensive receivers, and the rise of powerful
computers for implementing sophisticated signal processing algorithms. "WiFi radar" is an even newer
field that aims to use 802.11 emissions from standard noncooperative routers to perform indoor
localization. There are many potential applications of this technology: use as a supplement to GPS,
which typically has too low of a signal strength indoors to adequately track, track equipment in a
warehouse or factory, or detect targets using standard, everyday equipment without their knowledge as
a part of a security, surveillance or search and rescue system.

There already exist well known radar detection and tracking algorithms in the bistatic case, where the
transmitter and receiver are not collocated. However, standard radar systems have complete freedom
over their transmitted waveform and can therefore optimize for target tracking performance. One major
challenge in passive radar systems is the fact that the system has no control over the waveform, which
typically is a communication system waveform that is less than ideal for target localization. WiFi radar
poses the additional challenge that the multipath environment is extremely dense indoors, but has the
significant benefit that 802.11 devices are extremely widespread and commonplace.

The basic, first level construct in typical modern radar systems is a range-Doppler map – a 2D plot of
signal power as a function of time delay and received Doppler shift. From this, high power level spots in
this map can be inferred to be targets at a specific range and range-rate, and targets that repeatedly
appear in these maps over time can be tracked. This project aims to form range-Doppler maps from
simulated data using a variety of proposed algorithms.

\section{Problem Statement} 
Our goal is to first simulate a simple indoor scenario with both stationary and moving targets using 
pre-existing OFDM waveform simulations, such as that in \cite{Hemple}, and ray tracing. Total received signal at the receive antenna is modeled as

\begin{align*}
 s(t) = \sum_{l=1}^L A_l u(t-\tau_l)e^{j 2 \pi f_l t} + \sum_{m=1}^M A_m u(t-\tau_m)e^{j 2\pi f_m t} +
        \sum_{n=1}^N A_n u(t-\tau_n)e^{j 2 \pi f_n t} + A_{Dir} u(t-\tau_{Dir})
\end{align*}

Where $u(t)$ is the transmitted signal, there are $L$ targets, each scaled by $A_l$ in amplitude and time
delayed by $\tau_l$. Similarly, there are $M$ multipath returns and $N$ clutter returns all scaled and time delayed similarly, and finally the direct path return, which arrives first. This is given in \cite{Chetty} and was discussed in class.

We will calculate the ambiguity function of the simulated data, given by

\begin{align*}
\big|\int_{-\infty}^{\infty} s(t)s^*(t-\tau)e^{-j2\pi f_d t}dt \big|
\end{align*}

Which essentially provides useful information about the suitability of the OFDM WiFi waveform as a
radar signal, such as range resolution and Doppler resolution. Finally, we will implement range-Doppler
map forming algorithms as described in [1-4] and explain how these maps would be used to localize
targets.


\section{Main Results}

The general approach of a radar system is to transmit a known signal then test how well the received signal correlates with delay and Doppler shifted versions of the original signal. In this study, 1 second of 802.11g OFDM transmissions are used as the transmitted signal. The channel is estimated through a ray tracing simulation in an environment with walls and a moving target. The simulated OFDM transmissions are convolved with the channel impulse response and white Gaussian noise is added to yield the signal at the receiver. Finally, a 2D range-Doppler map is generated by correlating the received signal with delay and Doppler shifted versions of the transmitted signal. A visual inspection of these 2D plots provides insight into the position and movement of a target.

\subsection{Modeling the Channel}

To start, we implemented a ray tracing simulation that calculates the channel impulse response for each pulse time. The approach taken in this study follows that in \cite{Holt}. The goal is to model the impulse response

$ h(t) = \sum_{k=0}^{n} \beta_k e^{-j \theta_k} p(t - \tau_k) $

where for signal path $k$, $\beta_k$ is the gain, $\theta_k$ is the phase for a sinusoid with a certain frequency, and $\tau_k$ is the propagation time. This is difficult to model exactly, so instead a sampled, discrete impulse response $h_l[m]$ is estimated using this simulation. 

As an impulse is transmitted, the signal is transmitted in all directions with equal strength. This is modeled by a number of discrete rays with a corresponding cone width. The width of each ray increases with time, so a large number of rays may be needed to keep rays small. In implementation, it was found to be easier to model each ray as a triangle, and time step of a ray as a section of the triangle (a trapezoid) rather than as a section cone with curves. This was due to the need to calculate intersections with walls and the receiver. The triangle has one point at the transmitter and two points each $r(t)$ from the transmitter with an angle of $360/N_{rays}$ degrees between them. The size of the outside edge of the triangle, called the cone width $D_{cone}$ can be found using the law of cosines

\begin{align*}
D_{cone}(t)^2 &= r^2 + r^2 - 2(r)(r)cos(\frac{360}{N_{rays}})
              &= 2r^2(1 - cos(\frac{360}{N_{rays}}))
D_{cone}(t) &= \sqrt{2r^2(1 - cos(\frac{360}{N_{rays}}))}
\end{align*}

To simplify the calculations, the environment is assumed to be two dimensional, and the effects of walls and ceilings are neglected. Walls are modeled as reflecting, transmitting, and absorbing some portion of the energy.

\subsection{Data Generation}
Next, we convolved simulated data obtained from a Simulink model available on the MATLAB file exchange (TODO: ref / cite) with the time varying channel impulse response to obtain an 802.11g OFDM waveform at varying data rates as it might propagate around a room with a moving target. This data was saved and run through an algorithm to calculate a range-Doppler map, which is a 2D range-velocity plot commonly used in radar. Additionally, the extensive cancellation-batches algorithm was used to clean up the raw complex samples input to the range-Doppler map forming algorithm.

\subsection{Range-Doppler Maps and Formation}

A range-Doppler map is the basis of most modern radar technology. A bistatic radar system measures range to a target by listening for both the "direct path" signal from the transmitter as well as the multipath echoes from targets in the environment, and then finding the time difference between these copies of the transmitted signal. In addition to simply finding the range, the system must discriminate these echoes by their Doppler shift, or implied velocity along the lines of sight between the transmitter to target and target to receiver. This discrimination by velocity enables the radar system to separate stationary items in the environment, such as ground, walls, and buildings which comprise the majority of return power, from targets of interest, which must be moving at some minimum velocity for the system to be effective.

Range Doppler maps are formed in a passive system as follows. It is essentially a matched filter in both range and velocity directions calculated by cross-correlating the aforementioned direct path signal $s_ref$ with the multipath echoes $s_surv$. Time indices that correlate well will have a large value of the cross correlation function in the range direction, which indicates the presence of a reflection at the distance corresponding to the time it takes light to propagate that distance. Frequency indices that correlate well with frequency shifted versions of the reference signal indicate the presence of Doppler shift, and targets at a given range and velocity should then show up as bright spots in the 2D cross-correlation map.

The 2D cross-correlation is given by

$ C[l, p] = | \sum\limits_{i=0}^{N_{int}-1} s_{surv}[i]*s_{ref}^{*}[i - l]*e^{-j2\pi pi/N_{int}}|^2 $

where $l$ is the time delay bin which specifies range of echoes from that cell, $p$ is the Doppler bin which specifies Doppler shift frequency of that cell. $N_{int}$ is total number of raw samples in $s_{surv}$. Time delay bin and Doppler bin can both be converted to real quantities (meters and meters/second) as follows. The difference between the direct path distance and target bistatic range (known as the differential bistatic range) is $\delta R[l] = c*l*T_s$, where $T_s$ is equal to $1/f_s$, the A/D sample frequency. The Doppler bin p represents a Doppler frequency shift of $f_D[p] = p/(N_{int}T_s)$, which is converted into a Doppler velocity of $\delta v[p] = \lambda f_D[p]$. The quantity $N_{int}T_s$ is the CPI, or coherent processing interval, which determines Doppler resolution of the system as well as SNR gain, and for WiFi radar in our application is on the order of 1 second. At 2.4GHz this gives a Doppler resolution of 0.125 m/s.

According to \cite{Colone2012}, the 2D cross-correlation can be approximated by

$ C[l, p] = |\sum\limits_{m=0}^{M-1}\exp{-j2\pi pi_m/N_{int}}\chi^{(m)}[l]|^2 $

with $M$ number of pulses in this CPI, $i_m$ the time index of the irst sample of $m$th pulse, and $\chi^{(m)}[l]$ the $l$th sample of the cross-correlation function in the time (range) direction for the $m$th pulse. This time cross correlation is calculated with the MATLAB xcorr function, separating OFDM pulses out by start time index and correlating the observed and reference signals over identical indices. So we have a cross-correlation of each pulse with each observed vector at the receiver; these are trimmed such that the first time index corresponds to a range of 0 meters and the last time index corresponds to the length of an 802.11g OFDM pulse (4 microseconds, 1200 meters).

Next we choose our number of Doppler bins by the maximum velocity we wish to detect. We used 128 for this simulation, which gives a maximum absolute value of velocity of 8 m/s, again assuming integration time of 1s. Shorter integration times yield less fine velocity grading but higher max/min detectable velocity while keeping number of bins constant. The correlation in the velocity direction is computed explicitly in our code as written in the above approximation.

\subsection{Extensive Cancellation Algorithm - Batches}

The Extensive Cancellation Algorithm for removing direct path, multipath, and clutter echoes in passive radar is presented in \cite{Colone2006}, \cite{Colone2009}, and \cite{Colone2012}. It is essentially a Least-Squares algorithm that assumes clutter is in the nearest $K$ range bins and middle $P$ Doppler bins. The algorithm attempts to solve the problem

$ \min_{\alpha}(\|s_{obs} - X\alpha\|^2) $

Where $s_{obs}$ is the observed signal at the receiver of dimension $N x 1$. This is the "minimum residual signal power" after cancelling the clutter, direct path, and close range ground echoes in the aforementioned $K$ range bins and $P$ Doppler bins. The matrix X is

$X = B[\Lambda_{-P}S_{ref} \cdots \Lambda_{-1}S_{ref} \hspace{5 mm} S_{ref} \hspace{5mm} \Lambda_{1}S_{ref} \cdots \Lambda_{P}S_{ref}]$

where $B$ is the following permutation matrix

$B = \left \{b_{ij} \right \}

$\Lambda_p = 
	\begin{bmatrix}
	 1			&		0				&		\cdots		&		0 \\
	 0			&		\exp{j2\pi p}	&		\cdots		&		0 \\
	 \vdots 	&		\vdots			&		\ddots		&		\vdots \\
	 0			&		0				&		\cdots		&		\exp{j2\pi p(N + R - 1)
	\end{bmatrix}

TODO

\section{Main Results (EXPECTATIONS)}
\begin{itemize}

\item Begin with a high-level overview of the approach taken to solve the problem. The goal is to help prepare the reader for the more technical part to follow.

\item Describe the technical approach(s) taken to solve the problem stated above. Use mathematical expressions wherever appropriate. This should be written at a sufficient level of detail so that an interested reader could redo your work.

\item It may be helpful to split this several into separate regions. For instance, if we were considering the uplink channel that we studied in class, I would create sections named Capacity Region, CDMA, TDMA, and Successive Cancellation, rather than discussing all of these in one place. 

\end{itemize} 

\begin{theorem}
If you have any theorems to discuss, this section is the right place to state them. Clearly indicate where you got the theorem, including both the paper and the theorem number within that paper (e.g.,~\cite[Theorem 2]{Shannon1948}).
\begin{equation}
C = \log(1 + \mathsf{SNR}) \label{e:capacity}
\end{equation}
\end{theorem}
\begin{IEEEproof}
If the theorem only requires a short proof, then give the proof immediately after the theorem. If it requires more space, consider relegating it to an appendix. 
\end{IEEEproof}

\section{Simulations}
\subsection{Simulating Indoor Channel with Multipath Fading}
The first step to simulate passive radar in an indoor setting is build a model for indoor fading. It is difficult to create a model that perfectly models walls, ceilings, furniture, etc. This project used an approach similar to that described in \cite{Holt}. This project implemented a ray tracing simulation to estimate the impulse response of the channel in an environment with walls and a moving object. 

\section{Simulations (Expectations)} 

\begin{itemize}
\item Don't be indiscriminate in what
you are simulating. Think clearly about what you hope to learn or
illustrate though simulations. Choose the right experiments and the
right experimental conditions (the parameters). A few well chosen experiments
are more useful than tons of poorly planned experiments.

\item Clearly describe how you generated the simulations. Refer to the ``equation numbers'' of the key equations used in the simulations, such as~\eqref{e:capacity}.
 How did you choose
the values of parameters? What are their values? How many
trials did you run? In other words, the information you
provide here should be sufficiently detailed to permit a knowledgable
individual reading your report to reproduce your figures.

\item Provide plots, figures/pictures,
tables, and/or numerical data. Each item should have a title and a
caption and should be referenced in the report. The caption should be
self-contained as far as possible, that is, someone reading your
report should be able to get a very good idea of the results by just
reading the caption without having to read the text of the
report. All axes should be properly
labeled and the plot should have a legend. Make sure the font size is chosen so that the 
text is legible from a print out.

\item Discuss your results. What did you learn from the
simulations? Are the experiments in agreement with any theory? If so,
explain how? 

\item Be sure to include a copy of the code used to generate your figures when you submit the report.

\item If this is a literature survey, and you were trying to reproduce some of the figures in the paper, clearly indicate which figures and discuss how closely your figures agree with the original figures. If they do not completely match, explain why.

\end{itemize}

\section{Concluding remarks (EXPECTATIONS)}

\begin{itemize}

\item In a few sentences, give a high-level overview of your work and findings (what you learnt).

\item Highlight and explain what you think are the
strong points of your work and why. This could include: interesting
insights, illuminating simulations, or proof
techniques.

\item Explain what you think is less than
satisfactory in this work. This could include: limitations of the
modeling assumptions, sensitivity of the conclusions to uncertainty in
parts of the available information, computational intractability of
verification through experiments/simulations, etc.

\item How does this work personally
inspire you to think beyond this work? What are your recommendations
for future research directions that you would like to see pursued?

\end{itemize}

\begin{thebibliography}{100}

\bibitem{Chetty} Chetty, K.; Smith, G.E.; Woodbridge, K., "Through-the-Wall Sensing of Personnel Using Passive
Bistatic WiFi Radar at Standoff Distances," Geoscience and Remote Sensing, IEEE Transactions on ,
vol.50, no.4, pp.1218,1226, April 2012
doi: 10.1109/TGRS.2011.2164411

\bibitem{Maechler} Maechler, P.; Felber, N.; Kaeslin, H., "Compressive sensing for WiFi-based passive bistatic radar,"
Signal Processing Conference (EUSIPCO), 2012 Proceedings of the 20th European , vol., no.,
pp.1444,1448, 27-31 Aug. 2012

\bibitem{Buonanno} Buonanno, A.; D'Urso, M.; Palmieri, L., "Wifi-based passive bistatic radar by using moving target
indicator and least square adaptive filtering," Phased Array Systems \& Technology, 2013 IEEE
International Symposium on , vol., no., pp.174,179, 15-18 Oct. 2013

\bibitem{Colone2012} Colone, F.; Falcone, P.; Bongioanni, C.; Lombardo, P., "WiFi-Based Passive Bistatic Radar: Data
Processing Schemes and Experimental Results," Aerospace and Electronic Systems, IEEE Transactions
onAerospace and Electronic Signals, Vol. 48, no.2, pp.1061-1079, Apr. 2012

\bibitem{Hemple} Hemple, S., “Analysis and Simulation of Wireless ODFM Communications,” M.S. Thesis, Dept. of
Mathematics and Statistics, San Diego State Univ., San Diego, CA, Apr. 2012

\bibitem{Colone2011} Colone, F., “Ambiguity Function Analysis of Wireless LAN Transmissions for Passive Radar,”
Aerospace and Electronic Systems, IEEE Transactions on Aerospace and Electronic Systems, Vol. 47, No.1,
pp. 240-264, Jan. 2011

\bibitem{Holt} Holt, T.; Pahlavan, K.; Lee, J-F, "A graphical indoor radio channel simulator using 2D ray tracing," Personal, Indoor and Mobile Radio Communications, 1992. Proceedings, PIMRC '92., Third IEEE International Symposium on , vol., no., pp.411,416, 19-21 Oct 1992

\bibitem{Colone2009} Colone, F.; O'Hagan, D. W.; Lombardo, P.; Baker, C.J., "A Multistage Processing Algorithm for Disturbance Removal and Target Detection in Passive Bistatic Radar," IEEE Transactions on Aerospace and Electronic Systems, Vol. 45, no.2, Apr. 2009

\bibitem{Colone2006} Colone, F.; Cardinali, R.; Lombardo, P., "Cancellation of Clutter and Multipath in Passive Radar Using a Sequential Approach," IEEE Conference on Radar, Apr. 2006

\bibitem "IEEE Standard for Information Technology, Part 11: Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) specifications" IEEE Std 802.11-2012


\end{thebibliography}

\end{document}
